@* FormField.razor - Form field wrapper with label, validation, and help text *@

<div class="form-group @(HasError ? "has-error" : "") @AdditionalClasses"
     @attributes="AdditionalAttributes">
    @if (!string.IsNullOrEmpty(Label))
    {
        <label class="form-label" for="@InputId">
            @Label
            @if (IsRequired)
            {
                <span class="required-indicator" aria-hidden="true">*</span>
            }
        </label>
    }
    @ChildContent
    @if (!string.IsNullOrEmpty(ValidationMessage))
    {
        <span class="validation-message" role="alert">@ValidationMessage</span>
    }
    @if (!string.IsNullOrEmpty(HelpText) && string.IsNullOrEmpty(ValidationMessage))
    {
        <span class="help-text">@HelpText</span>
    }
</div>

@code {
    /// <summary>
    /// Gets or sets the input content (typically an input, select, or textarea).
    /// </summary>
    [Parameter]
    public RenderFragment? ChildContent { get; set; }

    /// <summary>
    /// Gets or sets the field label text.
    /// </summary>
    [Parameter]
    public string? Label { get; set; }

    /// <summary>
    /// Gets or sets a value indicating whether the field is required.
    /// </summary>
    [Parameter]
    public bool IsRequired { get; set; }

    /// <summary>
    /// Gets or sets the validation error message.
    /// </summary>
    [Parameter]
    public string? ValidationMessage { get; set; }

    /// <summary>
    /// Gets or sets the help text displayed below the input.
    /// </summary>
    [Parameter]
    public string? HelpText { get; set; }

    /// <summary>
    /// Gets or sets the ID of the input element for label association.
    /// </summary>
    [Parameter]
    public string? InputId { get; set; }

    /// <summary>
    /// Gets or sets additional CSS classes.
    /// </summary>
    [Parameter]
    public string? AdditionalClasses { get; set; }

    /// <summary>
    /// Gets or sets additional HTML attributes.
    /// </summary>
    [Parameter(CaptureUnmatchedValues = true)]
    public Dictionary<string, object>? AdditionalAttributes { get; set; }

    private bool HasError => !string.IsNullOrEmpty(ValidationMessage);
}
