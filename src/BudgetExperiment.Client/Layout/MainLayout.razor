@inherits LayoutComponentBase

@using BudgetExperiment.Client.Components.Navigation

<div class="page">
    <header class="top-header">
        <button class="menu-toggle" @onclick="ToggleNavigation" title="@(navCollapsed ? "Expand menu" : "Collapse menu")">
            <span class="toggle-icon">☰</span>
        </button>
        <a href="/" class="nav-brand">Budget Experiment</a>
    </header>

    <div class="content-wrapper">
        <aside class="sidebar @(navCollapsed ? "collapsed" : "expanded")">
            <NavMenu IsCollapsed="@navCollapsed" />
        </aside>

        <main class="main-content">
            @Body
        </main>
    </div>
</div>

@code {
    private bool navCollapsed = false;

    private void ToggleNavigation()
    {
        navCollapsed = !navCollapsed;
    }
}

<style>
    .page {
        min-height: 100vh;
        display: flex;
        flex-direction: column;
    }

    .top-header {
        display: flex;
        align-items: center;
        padding: 0 20px;
        height: 56px;
        background: #1e293b;
        color: white;
        gap: 16px;
        flex-shrink: 0;
    }

    .menu-toggle {
        background: transparent;
        border: none;
        color: white;
        font-size: 1.5rem;
        cursor: pointer;
        padding: 8px;
        border-radius: 4px;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: background 0.2s;
    }

    .menu-toggle:hover {
        background: rgba(255, 255, 255, 0.1);
    }

    .toggle-icon {
        line-height: 1;
    }

    .nav-brand {
        font-size: 1.25rem;
        font-weight: 600;
        color: white;
        text-decoration: none;
    }

    .nav-brand:hover {
        color: #e2e8f0;
    }

    .content-wrapper {
        display: flex;
        flex: 1;
        overflow: hidden;
    }

    .sidebar {
        flex-shrink: 0;
        transition: width 0.3s ease;
        overflow: hidden;
    }

    .sidebar.expanded {
        width: 220px;
    }

    .sidebar.collapsed {
        width: 60px;
    }

    .main-content {
        flex: 1;
        background: #f8f9fa;
        overflow-y: auto;
        padding: 20px;
    }

    /* Mobile responsive */
    @@media (max-width: 768px) {
        .sidebar.collapsed {
            width: 0;
        }

        .sidebar.expanded {
            position: fixed;
            top: 56px;
            left: 0;
            bottom: 0;
            z-index: 100;
            width: 220px;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.2);
        }

        .main-content {
            padding: 15px;
        }
    }

    /* Small mobile */
    @@media (max-width: 480px) {
        .nav-brand {
            font-size: 1rem;
        }

        .main-content {
            padding: 10px;
        }
    }
</style>
