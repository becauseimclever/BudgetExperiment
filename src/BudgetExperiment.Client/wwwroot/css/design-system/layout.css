/* ==========================================================================
   Layout System
   Budget Experiment Design System
   ========================================================================== */

/* ==========================================================================
   Container
   ========================================================================== */

.container {
  width: 100%;
  margin-left: auto;
  margin-right: auto;
  padding-left: var(--space-4);
  padding-right: var(--space-4);
}

/* Max-width containers at breakpoints */
@media (min-width: 640px) {
  .container {
    max-width: 640px;
  }
}

@media (min-width: 768px) {
  .container {
    max-width: 768px;
  }
}

@media (min-width: 1024px) {
  .container {
    max-width: 1024px;
  }
}

@media (min-width: 1280px) {
  .container {
    max-width: 1280px;
  }
}

/* Fluid container (no max-width) */
.container-fluid {
  width: 100%;
  padding-left: var(--space-4);
  padding-right: var(--space-4);
}

/* ==========================================================================
   App Layout (Sidebar + Main Content)
   ========================================================================== */

.app-layout {
  display: flex;
  min-height: 100vh;
}

.app-sidebar {
  width: 250px;
  flex-shrink: 0;
  background-color: var(--color-surface);
  border-right: 1px solid var(--color-border-subtle);
  display: flex;
  flex-direction: column;
}

.app-sidebar-collapsed {
  width: 60px;
}

.app-main {
  flex: 1;
  display: flex;
  flex-direction: column;
  min-width: 0; /* Prevent flex item from overflowing */
  background-color: var(--color-background);
}

.app-header {
  flex-shrink: 0;
  background-color: var(--color-surface);
  border-bottom: 1px solid var(--color-border-subtle);
}

.app-content {
  flex: 1;
  padding: var(--space-4);
  overflow-y: auto;
}

.app-footer {
  flex-shrink: 0;
  padding: var(--space-4);
  border-top: 1px solid var(--color-border-subtle);
}

/* ==========================================================================
   Page Layout
   ========================================================================== */

.page {
  padding: var(--space-6);
}

/* Page Container - centered content with max-width */
.page-container {
  max-width: 900px;
  margin-left: auto;
  margin-right: auto;
  padding: var(--space-5);
}

.page-container-wide {
  max-width: 1100px;
  margin-left: auto;
  margin-right: auto;
  padding: var(--space-5);
}

.page-container-narrow {
  max-width: 600px;
  margin-left: auto;
  margin-right: auto;
  padding: var(--space-5);
}

.page-header {
  margin-bottom: var(--space-6);
}

.page-title {
  font-size: var(--font-size-2xl);
  font-weight: var(--font-weight-semibold);
  margin: 0 0 var(--space-2) 0;
}

.page-subtitle {
  font-size: var(--font-size-base);
  color: var(--color-text-secondary);
  margin: 0;
}

.page-actions {
  display: flex;
  gap: var(--space-3);
  margin-top: var(--space-4);
}

/* Page header with title and actions on same line */
.page-header-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-4);
  flex-wrap: wrap;
}

.page-header-row .page-title {
  margin-bottom: 0;
}

.page-header-row .page-actions {
  margin-top: 0;
}

/* ==========================================================================
   Grid System (12-column)
   ========================================================================== */

.grid {
  display: grid;
  gap: var(--space-4);
}

/* Auto-fit grid */
.grid-auto {
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
}

/* Fixed column grids */
.grid-cols-1 { grid-template-columns: repeat(1, 1fr); }
.grid-cols-2 { grid-template-columns: repeat(2, 1fr); }
.grid-cols-3 { grid-template-columns: repeat(3, 1fr); }
.grid-cols-4 { grid-template-columns: repeat(4, 1fr); }
.grid-cols-6 { grid-template-columns: repeat(6, 1fr); }
.grid-cols-12 { grid-template-columns: repeat(12, 1fr); }

/* Column span */
.col-span-1 { grid-column: span 1; }
.col-span-2 { grid-column: span 2; }
.col-span-3 { grid-column: span 3; }
.col-span-4 { grid-column: span 4; }
.col-span-5 { grid-column: span 5; }
.col-span-6 { grid-column: span 6; }
.col-span-7 { grid-column: span 7; }
.col-span-8 { grid-column: span 8; }
.col-span-9 { grid-column: span 9; }
.col-span-10 { grid-column: span 10; }
.col-span-11 { grid-column: span 11; }
.col-span-12 { grid-column: span 12; }
.col-span-full { grid-column: 1 / -1; }

/* Row span */
.row-span-1 { grid-row: span 1; }
.row-span-2 { grid-row: span 2; }
.row-span-3 { grid-row: span 3; }
.row-span-full { grid-row: 1 / -1; }

/* ==========================================================================
   Responsive Grid (sm: 640px+)
   ========================================================================== */

@media (min-width: 640px) {
  .sm\:grid-cols-1 { grid-template-columns: repeat(1, 1fr); }
  .sm\:grid-cols-2 { grid-template-columns: repeat(2, 1fr); }
  .sm\:grid-cols-3 { grid-template-columns: repeat(3, 1fr); }
  .sm\:grid-cols-4 { grid-template-columns: repeat(4, 1fr); }

  .sm\:col-span-1 { grid-column: span 1; }
  .sm\:col-span-2 { grid-column: span 2; }
  .sm\:col-span-3 { grid-column: span 3; }
  .sm\:col-span-4 { grid-column: span 4; }
  .sm\:col-span-6 { grid-column: span 6; }
  .sm\:col-span-full { grid-column: 1 / -1; }
}

/* ==========================================================================
   Responsive Grid (md: 768px+)
   ========================================================================== */

@media (min-width: 768px) {
  .md\:grid-cols-1 { grid-template-columns: repeat(1, 1fr); }
  .md\:grid-cols-2 { grid-template-columns: repeat(2, 1fr); }
  .md\:grid-cols-3 { grid-template-columns: repeat(3, 1fr); }
  .md\:grid-cols-4 { grid-template-columns: repeat(4, 1fr); }
  .md\:grid-cols-6 { grid-template-columns: repeat(6, 1fr); }

  .md\:col-span-1 { grid-column: span 1; }
  .md\:col-span-2 { grid-column: span 2; }
  .md\:col-span-3 { grid-column: span 3; }
  .md\:col-span-4 { grid-column: span 4; }
  .md\:col-span-6 { grid-column: span 6; }
  .md\:col-span-8 { grid-column: span 8; }
  .md\:col-span-full { grid-column: 1 / -1; }
}

/* ==========================================================================
   Responsive Grid (lg: 1024px+)
   ========================================================================== */

@media (min-width: 1024px) {
  .lg\:grid-cols-1 { grid-template-columns: repeat(1, 1fr); }
  .lg\:grid-cols-2 { grid-template-columns: repeat(2, 1fr); }
  .lg\:grid-cols-3 { grid-template-columns: repeat(3, 1fr); }
  .lg\:grid-cols-4 { grid-template-columns: repeat(4, 1fr); }
  .lg\:grid-cols-5 { grid-template-columns: repeat(5, 1fr); }
  .lg\:grid-cols-6 { grid-template-columns: repeat(6, 1fr); }

  .lg\:col-span-1 { grid-column: span 1; }
  .lg\:col-span-2 { grid-column: span 2; }
  .lg\:col-span-3 { grid-column: span 3; }
  .lg\:col-span-4 { grid-column: span 4; }
  .lg\:col-span-6 { grid-column: span 6; }
  .lg\:col-span-8 { grid-column: span 8; }
  .lg\:col-span-9 { grid-column: span 9; }
  .lg\:col-span-full { grid-column: 1 / -1; }
}

/* ==========================================================================
   Responsive Display Utilities
   ========================================================================== */

/* Hide on mobile, show on larger screens */
.hidden { display: none !important; }

@media (min-width: 640px) {
  .sm\:block { display: block !important; }
  .sm\:flex { display: flex !important; }
  .sm\:grid { display: grid !important; }
  .sm\:hidden { display: none !important; }
}

@media (min-width: 768px) {
  .md\:block { display: block !important; }
  .md\:flex { display: flex !important; }
  .md\:grid { display: grid !important; }
  .md\:hidden { display: none !important; }
}

@media (min-width: 1024px) {
  .lg\:block { display: block !important; }
  .lg\:flex { display: flex !important; }
  .lg\:grid { display: grid !important; }
  .lg\:hidden { display: none !important; }
}

/* ==========================================================================
   Two-Column Layout (Sidebar Pattern)
   ========================================================================== */

.layout-sidebar {
  display: grid;
  gap: var(--space-6);
}

@media (min-width: 768px) {
  .layout-sidebar {
    grid-template-columns: 250px 1fr;
  }
}

@media (min-width: 1024px) {
  .layout-sidebar {
    grid-template-columns: 300px 1fr;
  }
}

.layout-sidebar-wide {
  display: grid;
  gap: var(--space-6);
}

@media (min-width: 1024px) {
  .layout-sidebar-wide {
    grid-template-columns: 350px 1fr;
  }
}

/* ==========================================================================
   Stack Layout (Vertical spacing)
   ========================================================================== */

.stack {
  display: flex;
  flex-direction: column;
}

.stack-1 { gap: var(--space-1); }
.stack-2 { gap: var(--space-2); }
.stack-3 { gap: var(--space-3); }
.stack-4 { gap: var(--space-4); }
.stack-6 { gap: var(--space-6); }
.stack-8 { gap: var(--space-8); }

/* ==========================================================================
   Inline Layout (Horizontal spacing)
   ========================================================================== */

.inline {
  display: flex;
  flex-direction: row;
  align-items: center;
}

.inline-1 { gap: var(--space-1); }
.inline-2 { gap: var(--space-2); }
.inline-3 { gap: var(--space-3); }
.inline-4 { gap: var(--space-4); }

/* ==========================================================================
   Split Layout (Space between items)
   ========================================================================== */

.split {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: var(--space-4);
}

/* ==========================================================================
   Center Layout
   ========================================================================== */

.center {
  display: flex;
  align-items: center;
  justify-content: center;
}

.center-vertical {
  display: flex;
  flex-direction: column;
  align-items: center;
}

/* ==========================================================================
   Aspect Ratio
   ========================================================================== */

.aspect-square { aspect-ratio: 1 / 1; }
.aspect-video { aspect-ratio: 16 / 9; }
.aspect-4-3 { aspect-ratio: 4 / 3; }

/* ==========================================================================
   Divider
   ========================================================================== */

.divider {
  border: none;
  border-top: 1px solid var(--color-border-subtle);
  margin: var(--space-4) 0;
}

.divider-vertical {
  border: none;
  border-left: 1px solid var(--color-border-subtle);
  height: 100%;
  margin: 0 var(--space-4);
}

/* ==========================================================================
   Sticky Elements
   ========================================================================== */

.sticky-top {
  position: sticky;
  top: 0;
  z-index: var(--z-sticky);
}

.sticky-bottom {
  position: sticky;
  bottom: 0;
  z-index: var(--z-sticky);
}

/* ==========================================================================
   Responsive Padding
   ========================================================================== */

@media (min-width: 768px) {
  .md\:p-6 { padding: var(--space-6) !important; }
  .md\:px-6 { padding-left: var(--space-6) !important; padding-right: var(--space-6) !important; }
  .md\:py-6 { padding-top: var(--space-6) !important; padding-bottom: var(--space-6) !important; }
}

@media (min-width: 1024px) {
  .lg\:p-8 { padding: var(--space-8) !important; }
  .lg\:px-8 { padding-left: var(--space-8) !important; padding-right: var(--space-8) !important; }
  .lg\:py-8 { padding-top: var(--space-8) !important; padding-bottom: var(--space-8) !important; }
}

/* ==========================================================================
   App Shell (Header + Sidebar + Content)
   ========================================================================== */

.app-shell {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

/* Top Header Bar */
.app-top-header {
  display: flex;
  align-items: center;
  padding: 0 var(--space-5);
  height: 56px;
  background: var(--color-header-bg);
  color: var(--color-header-text);
  gap: var(--space-4);
  flex-shrink: 0;
}

.app-menu-toggle {
  background: transparent;
  border: none;
  color: var(--color-header-text);
  cursor: pointer;
  padding: var(--space-2);
  border-radius: var(--radius-sm);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background-color var(--transition-fast);
}

.app-menu-toggle:hover {
  background: var(--color-header-hover);
}

.app-brand {
  font-size: var(--text-xl);
  font-weight: var(--font-semibold);
  color: var(--color-header-text);
  text-decoration: none;
}

.app-brand:hover {
  color: var(--color-header-text-hover);
  text-decoration: none;
}

.app-header-spacer {
  flex: 1;
}

/* Content Wrapper (Sidebar + Main) */
.app-content-wrapper {
  display: flex;
  flex: 1;
  height: calc(100vh - 56px); /* Viewport minus header height */
  overflow: hidden;
}

/* Sidebar */
.app-sidebar {
  flex-shrink: 0;
  height: 100%;
  transition: width var(--transition-normal);
  overflow: hidden;
  background: var(--color-sidebar-bg);
}

.app-sidebar.expanded {
  width: 220px;
}

.app-sidebar.collapsed {
  width: 60px;
}

/* Main Content Area */
.app-main-content {
  flex: 1;
  background: var(--color-bg-secondary);
  overflow-y: auto;
  padding: var(--space-5);
}

/* Mobile Responsive */
@media (max-width: 768px) {
  .app-sidebar.collapsed {
    width: 0;
  }

  .app-sidebar.expanded {
    position: fixed;
    top: 56px;
    left: 0;
    bottom: 0;
    z-index: var(--z-overlay);
    width: 220px;
    box-shadow: var(--shadow-lg);
  }

  .app-main-content {
    padding: var(--space-4);
  }
}

@media (max-width: 480px) {
  .app-brand {
    font-size: var(--text-base);
  }

  .app-main-content {
    padding: var(--space-3);
  }
}

