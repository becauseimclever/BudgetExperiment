# Feature 044.1: Theme-Aware Navbar Icons
> **Status:** üóíÔ∏è Planning
> **Depends on:** Feature 044 (UI Theme Rework)

## Overview

Allow navbar icons to change based on the selected theme. Each theme can define its own icon set or icon style, making the UI feel more cohesive and immersive. For example, Windows 95 could use pixelated/classic icons, GeoCities could use animated GIF-style icons, and Crayon Box could use hand-drawn style icons.

## Problem Statement

Currently, navbar icons are static and don't change with themes. This limits the immersive feel of themed experiences‚Äîa Windows 95 theme with modern flat icons feels inconsistent.

### Current State

- Navbar uses a single `Icon` component with Lucide-style icons
- Icons are referenced by name (e.g., "home", "calendar", "settings")
- No theme-aware icon switching
- ThemeService tracks current theme but icons don't respond to it

### Target State

- Each theme can optionally define its own icon set
- Navbar icons automatically switch when theme changes
- Fallback to default icons if theme doesn't define custom icons
- Easy to add custom icons for new themes

---

## User Stories

### Theme-Aware Icons

#### US-044.1-001: Icons match theme aesthetic
**As a** user  
**I want to** see icons that match my selected theme  
**So that** the UI feels cohesive and immersive

**Acceptance Criteria:**
- [ ] Navbar icons change when switching themes
- [ ] Each theme can define custom icons
- [ ] Default icons used when theme has no custom set
- [ ] Icon transitions are smooth (no flicker)

#### US-044.1-002: Easy to add themed icons
**As a** developer  
**I want to** easily add custom icons for a theme  
**So that** new themes can have unique icon styles

**Acceptance Criteria:**
- [ ] Clear pattern for adding themed icon sets
- [ ] Documentation for icon customization
- [ ] Icons can be SVG, image, or CSS-based

---

## Technical Design

### Architecture Options

#### Option A: Icon Set Registry (Recommended)
Create an icon registry that maps theme ‚Üí icon set. Each icon set defines replacements for standard icon names.

```csharp
public static class ThemedIcons
{
    public static Dictionary<string, Dictionary<string, string>> IconSets = new()
    {
        ["win95"] = new()
        {
            ["home"] = "win95-home",
            ["calendar"] = "win95-calendar",
            ["settings"] = "win95-settings",
        },
        ["geocities"] = new()
        {
            ["home"] = "geo-home",
            ["calendar"] = "geo-calendar",
        },
        // etc.
    };
}
```

#### Option B: CSS-Based Icon Switching
Use CSS to swap icon appearances based on `[data-theme]` attribute. Icons remain the same component but CSS changes their appearance.

```css
[data-theme="win95"] .icon-home {
    /* Override with Win95 style */
}
```

#### Option C: Theme Icon Provider Service
Extend `ThemeService` to provide icon resolution:

```csharp
public string GetIcon(string iconName)
{
    if (ThemedIcons.TryGetValue(CurrentTheme, iconName, out var themedIcon))
        return themedIcon;
    return iconName; // fallback
}
```

### Recommended Approach

**Option A + C combined:** Create an icon registry and expose it through ThemeService. The `Icon` component queries the current theme and resolves the appropriate icon.

### Files to Create/Modify

| File | Change |
|------|--------|
| `Services/ThemedIconRegistry.cs` | **NEW** - Maps themes to icon sets |
| `Services/ThemeService.cs` | Add `GetThemedIcon(string name)` method |
| `Components/Common/Icon.razor` | Use ThemeService to resolve icon name |
| `wwwroot/css/themes/*.css` | Optional CSS overrides for icon styling |
| `wwwroot/icons/win95/` | **NEW** - Windows 95 icon assets (if using images) |
| `wwwroot/icons/geocities/` | **NEW** - GeoCities icon assets |
| `wwwroot/icons/crayons/` | **NEW** - Crayon-style icon assets |

### Theme Icon Ideas

| Theme | Icon Style | Examples |
|-------|------------|----------|
| Windows 95 | Pixelated 16x16, classic Windows icons | üìÅ Folder, üè† House, ‚öôÔ∏è Gear |
| macOS | SF Symbols style, refined strokes | Clean, consistent weight |
| GeoCities | Animated GIFs, 3D beveled, spinning | üåü Rotating stars, üî• Flames |
| Crayon Box | Hand-drawn, sketchy, colorful | Wobbly lines, filled colors |
| Monopoly | Board game pieces, tokens | üé© Top hat, üè† Houses |

### Icon Component Enhancement

```razor
@* Enhanced Icon.razor *@
@inject ThemeService ThemeService

<span class="icon @Class" style="@GetSizeStyle()">
    @((MarkupString)GetIconSvg())
</span>

@code {
    [Parameter] public string Name { get; set; } = "";
    
    private string GetIconSvg()
    {
        var themedName = ThemeService.GetThemedIcon(Name);
        return IconRegistry.GetSvg(themedName);
    }
}
```

---

## Implementation Plan

### Phase 1: Icon Registry Infrastructure

**Objective:** Create the foundation for themed icons

**Tasks:**
- [ ] Create `ThemedIconRegistry.cs` with theme ‚Üí icon mappings
- [ ] Add `GetThemedIcon(string name)` to `ThemeService`
- [ ] Update `Icon.razor` to use themed icon resolution
- [ ] Ensure fallback to default icons works

**Commit:**
- feat(client): add themed icon registry infrastructure

---

### Phase 2: Windows 95 Icons

**Objective:** Create first themed icon set as proof of concept

**Tasks:**
- [ ] Design/source Windows 95 style icons (pixelated, classic)
- [ ] Add icons for: home, calendar, settings, wallet, plus, import, chart
- [ ] Register in ThemedIconRegistry
- [ ] Test switching to Win95 theme

**Commit:**
- feat(client): add Windows 95 themed icons

---

### Phase 3: GeoCities Icons

**Objective:** Add over-the-top 90s web icons

**Tasks:**
- [ ] Create/source animated or retro-style icons
- [ ] Consider CSS animations for "spinning" effects
- [ ] Register icons for GeoCities theme

**Commit:**
- feat(client): add GeoCities themed icons

---

### Phase 4: Crayon Box Icons

**Objective:** Add playful hand-drawn style icons

**Tasks:**
- [ ] Create/source sketchy, colorful icons
- [ ] Match the Crayola color palette
- [ ] Register icons for Crayon Box theme

**Commit:**
- feat(client): add Crayon Box themed icons

---

### Phase 5: Other Themes (Optional)

**Objective:** Add icons for remaining themes if desired

**Tasks:**
- [ ] macOS: SF Symbols-style icons (may use defaults)
- [ ] Monopoly: Board game themed icons
- [ ] Dark/Light/VS Code: Use default Lucide icons

**Commit:**
- feat(client): add additional themed icon sets

---

## Testing Strategy

### Automated Tests

- [ ] ThemedIconRegistry returns correct icon for each theme
- [ ] Fallback to default icon when theme has no override
- [ ] Icon component renders themed icon based on current theme

### Manual Testing Checklist

- [ ] Switch themes and verify navbar icons change
- [ ] Verify no icon flicker during theme switch
- [ ] Check all navbar icons in each themed set
- [ ] Verify fallback icons work for partial icon sets
- [ ] Test on mobile (icons scale properly)

---

## Migration Notes

- None (additive feature)
- Existing Icon usage continues to work (fallback)

---

## Security Considerations

- Ensure icon assets are sanitized (especially SVGs)
- No user-uploaded icons in initial implementation

---

## Performance Considerations

- Lazy-load themed icon sets to avoid bundle bloat
- Consider SVG sprites for frequently used icons
- CSS-based icon switching is most performant

---

## Future Enhancements

- User-customizable icon sets
- Icon pack marketplace/downloads
- Animated icon transitions between themes
- Holiday/seasonal icon sets

---

## References

- Feature 044: UI Theme Rework (prerequisite)
- Current Icon component: `src/BudgetExperiment.Client/Components/Common/Icon.razor`
- Lucide Icons: https://lucide.dev/

---

## Changelog

| Date | Change | Author |
|------|--------|--------|
| 2026-02-01 | Initial draft | @github-copilot |
